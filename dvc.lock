schema: '2.0'
stages:
  evaluate:
    cmd: python -m run.evaluate
    deps:
    - path: data/
      hash: md5
      md5: 26afe518d513bb3b3da61c889b5a4ce2.dir
      size: 1158
      nfiles: 1
    - path: src/sample_judge/prompt
      hash: md5
      md5: 1427533ff7947135278d60a7918c5668.dir
      size: 385
      nfiles: 2
    - path: src/sample_judge/rule_base_judge
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    outs:
    - path: result/result.csv
      hash: md5
      md5: f5b5c9a18e78458d1a2fdd35d4096e10
      size: 5684
  rulebase_evaluate@count_text_length:
    cmd: python -m run.rulebase_evaluate --rulebase_func_name count_text_length 
      --submit_file_name data_set_idol_discription
    deps:
    - path: data/submit/data_set_idol_discription.csv
      hash: md5
      md5: 4fcb65c99b140b88fc7abc939b0cf9e1
      size: 1260
    - path: run/rulebase_evaluate.py
      hash: md5
      md5: 1b5cf17cf1ddcb62d26eb7df59a18a35
      size: 1665
    - path: src/judge/rulebase_funcs/count_text_length.py
      hash: md5
      md5: 055b0c892221991b62284da516344de5
      size: 356
    outs:
    - path: 
        data/result/rulebase_data_set_idol_discription_count_text_length.json
      hash: md5
      md5: 60d3fb0bbb4e7b86b7e03e12faa3a71e
      size: 1421
  rulebase_evaluate@check_megu_in_text:
    cmd: python -m run.rulebase_evaluate --rulebase_func_name check_megu_in_text
      --submit_file_name data_set_idol_discription
    deps:
    - path: data/submit/data_set_idol_discription.csv
      hash: md5
      md5: 4fcb65c99b140b88fc7abc939b0cf9e1
      size: 1260
    - path: run/rulebase_evaluate.py
      hash: md5
      md5: 1b5cf17cf1ddcb62d26eb7df59a18a35
      size: 1665
    - path: src/judge/rulebase_funcs/check_megu_in_text.py
      hash: md5
      md5: a05c349a92ce22b233956445f5ab403b
      size: 380
    outs:
    - path: 
        data/result/rulebase_data_set_idol_discription_check_megu_in_text.json
      hash: md5
      md5: 8c23b2945562559231c7bee9dd980312
      size: 1421
  llm_evaluate@check_if_category_in_text:
    cmd: python -m run.llm_evaluate --prompt_name check_if_category_in_text 
      --submit_file_name data_set_idol_discription
    deps:
    - path: data/submit/data_set_idol_discription.csv
      hash: md5
      md5: 4fcb65c99b140b88fc7abc939b0cf9e1
      size: 1260
    - path: run/llm_evaluate.py
      hash: md5
      md5: 4ca1482b17798e4e3210b4e968d1b88f
      size: 2032
    - path: src/judge/prompt/check_if_category_in_text.txt
      hash: md5
      md5: 2d6d66c9c29a288f2114d7cbd0a9a078
      size: 183
    outs:
    - path: 
        data/result/llm_data_set_idol_discription_check_if_category_in_text.json
      hash: md5
      md5: 8e455079359d19b9071505433a0605e6
      size: 1514
  llm_evaluate@check_if_gakunen_in_text:
    cmd: python -m run.llm_evaluate --prompt_name check_if_gakunen_in_text 
      --submit_file_name data_set_idol_discription
    deps:
    - path: data/submit/data_set_idol_discription.csv
      hash: md5
      md5: 4fcb65c99b140b88fc7abc939b0cf9e1
      size: 1260
    - path: run/llm_evaluate.py
      hash: md5
      md5: 4ca1482b17798e4e3210b4e968d1b88f
      size: 2032
    - path: src/judge/prompt/check_if_gakunen_in_text.txt
      hash: md5
      md5: b2c196a574b01de1914f29010f3f4fc6
      size: 184
      isexec: true
    outs:
    - path: 
        data/result/llm_data_set_idol_discription_check_if_gakunen_in_text.json
      hash: md5
      md5: 8e455079359d19b9071505433a0605e6
      size: 1514
  make_dashboard:
    cmd: poetry run python -m run.make_dashboard
    deps:
    - path: data/result/
      hash: md5
      md5: 2cb811363f171d09e2ce5f80b4bd97be.dir
      size: 9755
      nfiles: 7
    - path: run/make_dashboard.py
      hash: md5
      md5: 8f986571e55ed2edbfcd716449b7396f
      size: 794
    outs:
    - path: data/dashboard/condition_mikoto_run_ids.csv
      hash: md5
      md5: 151002d9bfe5e50142ff8b47a5bf2d46
      size: 1112
    - path: data/dashboard/generate_history.csv
      hash: md5
      md5: 2a4b4d321627fc4ce91dde3b52915579
      size: 7916
    - path: data/dashboard/judge_history.csv
      hash: md5
      md5: 085d08679de283324f65fe2a4f287836
      size: 5465
    - path: data/dashboard/scores.csv
      hash: md5
      md5: 19f9d6bec67126c16c4d3d3e20528260
      size: 962
  llm_generate:
    cmd: poetry run python -m run.llm_generate --generate_target_name data 
      --prompt_name set_idol_discription
    deps:
    - path: data/generate_target/data.csv
      hash: md5
      md5: fbf274e04fdb7adc0b2fafbf175e220f
      size: 97
    - path: run/llm_generate.py
      hash: md5
      md5: 79f29abda8ed6d00e424a42c6918b79f
      size: 2070
    - path: src/generate/prompt/set_idol_discription.txt
      hash: md5
      md5: 1af23e379e5f70f2aeb56a2c0d9bfcc8
      size: 127
    params:
      params.yaml:
        generate:
          generate_data_name: data
          generate_prompt_name: set_idol_discription
          model_config:
            model: gpt-3.5-turbo
    outs:
    - path: data/submit/data_set_idol_discription.csv
      hash: md5
      md5: 4fcb65c99b140b88fc7abc939b0cf9e1
      size: 1260
  llm_evaluate@0:
    cmd: python -m run.llm_evaluate --judge_name hime_in_text --submit_file_name
      data_set_idol_discription
    deps:
    - path: data/submit/data_set_idol_discription.csv
      hash: md5
      md5: 4fcb65c99b140b88fc7abc939b0cf9e1
      size: 1260
    - path: run/llm_evaluate.py
      hash: md5
      md5: 64777130d2a2e5ff58d98e474af65cc8
      size: 4496
    - path: src/judge/prompt/check_if_category_in_text.txt
      hash: md5
      md5: 5054446a188b52bdb942a064bcef64a3
      size: 195
    outs:
    - path: data/result/llm_data_set_idol_discription_hime_in_text.json
      hash: md5
      md5: 7f64b925ba1b483702cacd1de7f908f1
      size: 1943
  llm_evaluate@1:
    cmd: python -m run.llm_evaluate --judge_name ruri_in_text --submit_file_name
      data_set_idol_discription
    deps:
    - path: data/submit/data_set_idol_discription.csv
      hash: md5
      md5: 4fcb65c99b140b88fc7abc939b0cf9e1
      size: 1260
    - path: run/llm_evaluate.py
      hash: md5
      md5: 64777130d2a2e5ff58d98e474af65cc8
      size: 4496
    - path: src/judge/prompt/check_if_category_in_text.txt
      hash: md5
      md5: 5054446a188b52bdb942a064bcef64a3
      size: 195
    outs:
    - path: data/result/llm_data_set_idol_discription_ruri_in_text.json
      hash: md5
      md5: b9c1590547a9043c09db4330b57105c1
      size: 1943
  llm_evaluate@2:
    cmd: python -m run.llm_evaluate --judge_name ruri_in_text_in_3nensei 
      --submit_file_name data_set_idol_discription
    deps:
    - path: data/submit/data_set_idol_discription.csv
      hash: md5
      md5: 4fcb65c99b140b88fc7abc939b0cf9e1
      size: 1260
    - path: run/llm_evaluate.py
      hash: md5
      md5: 64777130d2a2e5ff58d98e474af65cc8
      size: 4496
    - path: src/judge/prompt/check_if_category_in_text.txt
      hash: md5
      md5: 5054446a188b52bdb942a064bcef64a3
      size: 195
    outs:
    - path: 
        data/result/llm_data_set_idol_discription_ruri_in_text_in_3nensei.json
      hash: md5
      md5: 5fe6f8dfc30343bbca93ce0d5b7c53dc
      size: 721
  llm_evaluate@3:
    cmd: python -m run.llm_evaluate --judge_name ruri_in_text_in_2nensei 
      --submit_file_name data_set_idol_discription
    deps:
    - path: data/submit/data_set_idol_discription.csv
      hash: md5
      md5: 4fcb65c99b140b88fc7abc939b0cf9e1
      size: 1260
    - path: run/llm_evaluate.py
      hash: md5
      md5: 64777130d2a2e5ff58d98e474af65cc8
      size: 4496
    - path: src/judge/prompt/check_if_category_in_text.txt
      hash: md5
      md5: 5054446a188b52bdb942a064bcef64a3
      size: 195
    outs:
    - path: 
        data/result/llm_data_set_idol_discription_ruri_in_text_in_2nensei.json
      hash: md5
      md5: 785fddf72f3d3ed591b0327f0b30525b
      size: 687
  llm_evaluate@4:
    cmd: python -m run.llm_evaluate --judge_name check_if_gakunen_in_text 
      --submit_file_name data_set_idol_discription
    deps:
    - path: data/submit/data_set_idol_discription.csv
      hash: md5
      md5: 4fcb65c99b140b88fc7abc939b0cf9e1
      size: 1260
    - path: run/llm_evaluate.py
      hash: md5
      md5: b1aeb18a923eb3aa2a3cc147bfdb0b53
      size: 3362
    - path: src/judge/prompt/check_if_gakunen_in_text.txt
      hash: md5
      md5: b2c196a574b01de1914f29010f3f4fc6
      size: 184
      isexec: true
    outs:
    - path: 
        data/result/llm_data_set_idol_discription_check_if_gakunen_in_text.json
      hash: md5
      md5: 024d9a8853aa2c0ac3c06ea22a84cbca
      size: 1619
